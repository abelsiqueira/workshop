\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{nopageno}
\usepackage{listings}
\usepackage[usenames,dvipsnames]{color}

\usepackage[top=1cm,bottom=2cm,left=1cm,right=1cm, paperwidth=12cm,
paperheight=18cm]{geometry}
\title{Python2}
\author{Laboratório de Pesquisa Operacional e Otimização \\
Abel Siqueira \\
Raniere Silva
}
\date{ 21 de Fevereiro de 2014 }

\newcommand{\iframe}[1]{
\Large
\begin{center}
#1
\end{center}
}
\newcommand{\iframeend}{ \vfill \newpage}
\newcommand{\aframe}[1]{
\Large
\begin{center}
#1
\end{center}
\vfill
\newpage
}

\newcommand{\tit}[1]{
{\LARGE \color{green} #1}
\\ \vspace{0.5cm}
\vfill
}
\newcommand{\cmd}[1]{
\begin{flushleft}
{\color{yellow} \tt \$ #1 }\\
\end{flushleft}
}
\newcommand{\cmdpy}[1]{
\begin{flushleft}
{\color{yellow} \tt > #1 }\\
\end{flushleft}
}
\newcommand{\inline}[1]{
{\color{yellow} \tt #1} }

\definecolor{filebg}{gray}{0.1}
\lstdefinestyle{filestyle}{
  language=Python,
  basicstyle=\ttfamily,
  keywordstyle=\color{red},
  commentstyle=\itshape\color{cyan},
  stringstyle=\color{green},
  frame=single,
  breaklines=true,
  breakatwhitespace=false,
  showspaces=false,
  showstringspaces=false,
  backgroundcolor=\color{filebg}
}
\lstnewenvironment{file}{\lstset{style=filestyle}}{}

\pagecolor{black}
\color{white}

\begin{document}

\maketitle
\newpage

\aframe{
  \tit{Introdução}
  Podemos criar arquivos e rodá-los com \inline{python2}, 
  ou utilizar o Interpretador Interativo.

  Vamos começar usando o interpretador. Para isso, digite
  \cmd{python2}
  Obtendo
  \cmdpy{}
}

\aframe{
\tit{O famoso... }
\cmdpy{print "Hello World" \\
Hello World}
}

\aframe{
  \tit{Exemplos básicos}
  \cmdpy{2 + 3}
  \cmdpy{10*20}
  \cmdpy{3**5}
  \cmdpy{2\textasciicircum 1 \#Não é potência}
  \cmdpy{print "abel"*3}
  \cmdpy{print "junt" + "ando"}
}

\iframe{
\tit{Arquivo básico}
Crie um arquivo \inline{test1.py} com o conteúdo
}
\begin{file}
s = raw_input()
print s.swapcase()
\end{file}
\iframe{
Execute com
\cmd{python2 test1.py}
e digite qualquer coisa.
}
\iframeend

\iframe{
  \tit{Algo útil}
  Vamos criar um programa para fatorial.
  Para isso, usaremos funções.

  Crie o arquivo \inline{fact.py}.
}
\begin{file}
def factorial(n):
  # Calcula o fatorial
  return 1
\end{file}
\iframe{
  No interpretador faça
  \cmdpy{from fact import factorial}
  \cmdpy{factorial(1) \\
  1}
  \cmdpy{factorial(5) \\
  1}
}
\iframeend

\iframe{
  \tit{Algo útil}
  Melhorando
}
\begin{file}
def factorial(n):
  # Calcula o fatorial
  if n <= 0:
    return 1
  else
    return n*factorial(n-1)
\end{file}
\iframeend

\iframe{
  \tit{Algo útil}
  E também, para não ter que chamar sempre o interpretador,
  crie o arquivo \inline{callfact.py}.
}
\begin{file}
from fact import factorial

print factorial(0)
print factorial(2)
print factorial(5)
print factorial(-1)
\end{file}
\iframe{
  E chamamos
  \cmd{python2 callfact.py \\
1 \\
2 \\
120 \\
1
}
}
\iframeend
\iframe{
  \tit{Algo útil}
  Vamos fazer com que o fatorial de um número negativo retorne 0.
}
\begin{file}
def factorial(n):
  # Calcula o fatorial
  if n < 0:
    return 0
  elif n <= 1:
    return 1
  else
    return n*factorial(n-1)
\end{file}
\iframeend

\aframe{
  \tit{Algo útil}
  Rodando novamente, obtemos
  \cmd{python2 callfact.py \\
1 \\
2 \\
120 \\
0
}
}

\aframe{
  \tit{Piorando}
  Mas agora eu quero calcular o fatorial dos 30 primeiros naturais.
  
  Vamos modificar o arquivo \inline{callfact.py} para imprimir
  \begin{flushleft}
    \ttfamily \color{yellow}
    1! = 1 \\
    2! = 2 \\
    3! = 6
  \end{flushleft}
}

\iframe{
  \tit{Piorando}
  Vamos tentar fazendo
}
\begin{file}
from fact import factorial

i = 1
while i <= 30:
  print i + "! = " + factorial(i)
  i = i + 1
\end{file}
\iframeend

\aframe{
  \tit{Piorando}
  Rodando obtemos
  \cmd{python2 callfact.py \\
Traceback (most recent call last): \\
File "callfact.py", line 5, in <module> \\
print i + "! = " + factorial(i) \\
TypeError: unsupported operand type(s) for +: 'int' and 'str'
}
Isso acontece porque \inline{i} é um inteiro e \inline{"! = "} é uma string.
Podemos resolver convertendo \inline{i} para uma string.
}

\aframe{
  \tit{Convertendo int para str}
Uma maneira de fazer isso é com \inline{str(i)}.
  \cmdpy{print str(2) + "\textasciicircum2 = " + str(2**2) \\
  2\textasciicircum2 = 4}

  A outra é com o comanto \inline{format}
  \cmdpy{print "\{\}\textasciicircum2 = \{\}".format(2, 2**2) \\
  2\textasciicircum2 = 4}
  
  Note que a segunda maneira é mais parecida com um printf. Inclusive, você pode
  usar comandos parecidos com aqueles do printf para obter uma formatação
  específica.

  A outra é com o comanto \inline{format}
  \cmdpy{print "\{\}\textasciicircum2 = \{:.2f\}".format(2, 2**2) \\
  2\textasciicircum2 = 4.00}
}

\iframe{
  \tit{Resolvendo}
  Utilizando uma das maneiras:
}
\begin{file}
from fact import factorial

i = 1
while i <= 30:
  print "{}! = {}".format(i, factorial(i))
  i = i + 1
\end{file}
\iframeend

\aframe{
  \tit{Listas}
  Python trabalha bastante com listas:
  \cmdpy{alunos = ["abel", "raniere"] \\
  > print alunos}
  Podemos passear nas listas usando o \inline{for}
  \cmdpy{for aluno in alunos: \\
  . \qquad print aluno}
  Podemos verificar por índice
  \cmdpy{alunos[1]}
  Podemos verificar se um aluno específico está lá
  \cmdpy{"abel" in alunos}
}

\aframe{
  \tit{Exercícios}
  \begin{enumerate}
    \item Escreva um arquivo com uma função que verifica se um número é primo.
      Você precisará do operador \inline{\%} que calcula o resto da divisão de
      um número por outro. Teste no interpretador \inline{5\%3}, \inline{4\%2} e
      \inline{10\%4}.
    \item Faça um programa que lê um número e calcula a sequência de Collatz
      desse número, imprimindo todos os números da sequência.
      $$
        a_{n+1} = \left\{\begin{array}{ll}
            a_n/2, & \mbox{se } a_n \mbox{ é par} \\
            3a_n + 1, & \mbox{se } a_n \mbox{ é ímpar}.
        \end{array}\right.
      $$
    \item (Difícil) Faça um programa que mostra todos os números primos até
      100000. Use a lista para fazer um programa eficiente, i.e. basta verificar
      a divisibilidade por primos.
  \end{enumerate}
}

\end{document}
